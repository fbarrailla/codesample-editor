{"version":3,"sources":["state/reducers.js","state/actionTypes.js","state/actions.js","state/selectors.js","state/store.js","components/Title.js","components/Editor.js","libs/canvas2image.js","components/Settings.js","state/db.js","components/CustomBgSettings.js","hooks/useFileInput.js","components/PreviewWindow.js","components/Image.js","libs/canvasImageCoverPosition.js","components/Preview.js","hooks/useBoundingRect.js","components/LocalStorage.js","components/App.js","serviceWorker.js","index.js"],"names":["persistedState","localStorage","getItem","initialState","JSON","parse","code","language","background","customBackground","state","arguments","length","undefined","action","type","payload","editCode","setLanguage","setBackground","bg","setCustomBackground","getBackground","getCustomBackground","isCustomBackground","createSelector","getBackgroundColor","isCustom","customBg","test","isBackgroundImage","store","initStore","reducers","actions","selectors","useStore","StoreProvider","styled","h1","_templateObject","Wrapper","div","Editor_templateObject","EditorTitle","Title","_templateObject2","CodeInput","textarea","_templateObject3","Editor","_useStore","dispatch","inputRef","useRef","useEffect","current","focus","react_default","a","createElement","value","onChange","e","target","ref","spellCheck","b64toBlob","b64Data","contentType","sliceSize","substring","byteCharacters","atob","byteArrays","offset","slice","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","push","Blob","canvas2image","$support","canvas","document","ctx","getContext","imageData","getImageData","dataURL","toDataURL","btoa","window","scaleCanvas","width","height","w","h","retCanvas","retCtx","drawImage","getDataURL","saveFile","strData","filename","createObjectURL","link","body","appendChild","download","URL","webkitURL","alert","href","click","genImage","img","src","fixType","toLowerCase","replace","match","encodeData","data","str","String","fromCharCode","makeURI","genBitmapImage","oData","biWidth","biHeight","biSizeImage","bfSize","BITMAPFILEHEADER","BITMAPINFOHEADER","iPadding","aImgData","strPixelData","biWidth4","y","iOffsetY","strPixelRow","x","iOffsetX","c","concat","saveAsImage","getElementById","convertToImage","saveAsPNG","saveAsJPEG","saveAsGIF","saveAsBMP","convertToPNG","convertToJPEG","convertToGIF","convertToBMP","BackgroundSelect","Select","Settings_templateObject","LanguageSelect","Settings_templateObject2","Label","label","Settings_templateObject3","backgrounds","languages","SyntaxHighlighter","supportedLanguages","map","l","Settings","selectedLanguage","selectedBackground","find","Fragment","htmlFor","id","option","options","dbPromise","idb","open","upgradeDB","createObjectStore","bgImageStore","key","then","db","transaction","objectStore","get","val","tx","put","complete","CustomBgSettings_templateObject","Button","button","CustomBgSettings_templateObject2","ColorPickerWrapper","CustomBgSettings_templateObject3","CustomBgSettings","colorPickerWrapperRef","select","_useState","useState","_useState2","Object","slicedToArray","isColorPickerVisible","setColorPickerVisible","uploadFile","input","fileInput","handleChange","evt","file","toConsumableArray","files","reader","FileReader","onload","result","readAsDataURL","addEventListener","removeEventListener","useFileInput","fileContent","Date","bgImage","setBgImage","useOnClickOutside","react_color_lib","color","onChangeComplete","hex","CustomBgSettings_Wrapper","onClick","PreviewWindow_templateObject","Toolbar","PreviewWindow_templateObject2","ToolbarIcon","PreviewWindow_templateObject3","p","CodeWrapper","_templateObject4","PreviewWindow","_ref","children","PreviewWindow_Wrapper","Image","canvasRef","rect","setRect","_useState3","_useState4","image","setImage","clearRect","requestAnimationFrame","draw","with","_canvas$getBoundingCl","getBoundingClientRect","canvasWidth","canvasHeight","_canvasImageCoverPosi","imgNaturalWidth","imgNaturalHeight","offsetLeft","offsetTop","A1","A2","A3","B1","B2","B3","dA","dB","round","v","Math","abs","canvasImageCoverPosition","imgWidth","imgHeight","Preview_templateObject","PreviewTitle","Preview_templateObject2","CaptureButton","Preview_templateObject3","TitleWrapper","Preview_templateObject4","PreviewZone","_templateObject5","BackgroundImage","_templateObject6","CustomBgSettingsWrapper","_templateObject7","Preview","backgroundImage","setBackgroundImage","previewRef","_useBoundingRect","size","setSize","onResize","debouce","useBoundingRect","previewWidth","previewHeight","Preview_Wrapper","components_Settings","title","previewZone","html2canvas","ignoreElements","el","classList","contains","logging","_previewZone$getBound","Canvas2Image","role","aria-label","style","className","components_CustomBgSettings","components_PreviewWindow","prism_default","tomorrow","wrapLines","components_Image","LocalStorage","setItem","stringify","GlobalStyle","createGlobalStyle","App_templateObject","reset","App_templateObject2","App","components_LocalStorage","App_Wrapper","components_Editor","components_Preview","Boolean","location","hostname","registerLanguage","jsx","ReactDOM","render","components_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d69eb9b4.chunk.js","sourcesContent":["import * as types from './actionTypes';\n\nconst CODE_PLACEHOLDER = `// Type code here`;\n\nconst persistedState = localStorage.getItem('appState');\n\nconst initialState = persistedState\n  ? JSON.parse(persistedState)\n  : {\n      code: CODE_PLACEHOLDER,\n      language: 'javascript',\n      background: 'rgb(158, 173, 175)',\n      customBackground: '#808080',\n    };\n\nexport const code = (\n  state = initialState.code || CODE_PLACEHOLDER,\n  action = {}\n) => {\n  switch (action.type) {\n    case types.EDIT_CODE:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport const language = (state = initialState.language, action = {}) => {\n  switch (action.type) {\n    case types.SET_LANGUAGE:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport const background = (state = initialState.background, action = {}) => {\n  switch (action.type) {\n    case types.SET_BACKGROUND:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n\nexport const customBackground = (\n  state = initialState.customBackground,\n  action = {}\n) => {\n  switch (action.type) {\n    case types.SET_CUSTOM_BACKGROUND:\n      return action.payload;\n    default:\n      return state;\n  }\n};\n","export const EDIT_CODE = 'EDIT_CODE';\nexport const SET_LANGUAGE = 'SET_LANGUAGE';\nexport const SET_BACKGROUND = 'SET_BACKGROUND';\nexport const SET_CUSTOM_BACKGROUND = 'SET_CUSTOM_BACKGROUND';\n","import * as types from './actionTypes';\n\nexport const editCode = code => ({ type: types.EDIT_CODE, payload: code });\n\nexport const setLanguage = language => ({\n  type: types.SET_LANGUAGE,\n  payload: language,\n});\n\nexport const setBackground = bg => ({\n  type: types.SET_BACKGROUND,\n  payload: bg,\n});\n\nexport const setCustomBackground = bg => ({\n  type: types.SET_CUSTOM_BACKGROUND,\n  payload: bg,\n});\n","import { createSelector } from 'reselect';\n\nconst getBackground = state => state.background;\nexport const getCustomBackground = state => state.customBackground;\n\nexport const isCustomBackground = createSelector(\n  getBackground,\n  bg => bg === 'custom'\n);\n\nexport const getBackgroundColor = createSelector(\n  getBackground,\n  isCustomBackground,\n  getCustomBackground,\n  (bg, isCustom, customBg) => {\n    if (isCustom) {\n      if (/^-img/.test(customBg)) {\n        return 'transparent';\n      }\n      return customBg;\n    }\n    return bg;\n  }\n);\n\nexport const isBackgroundImage = createSelector(\n  isCustomBackground,\n  getCustomBackground,\n  (isCustom, customBg) => isCustom && /^img-/.test(customBg)\n);\n","import { initStore } from 'use-redux-store';\nimport * as reducers from './reducers';\nimport * as actions from './actions';\nimport * as selectors from './selectors';\n\nconst store = initStore({\n  reducers,\n  actions,\n  selectors,\n});\n\nexport const useStore = store.useStore;\nexport const StoreProvider = store.StoreProvider;\n","import styled from 'styled-components';\n\nexport default styled.h1`\n  font-size: 28px;\n  height: 38px;\n  line-height: 38px;\n`;\n","import React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { useStore } from '../state/store';\nimport Title from './Title';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 4;\n  background-color: rgb(38, 50, 56);\n  padding: 20px;\n`;\n\nconst EditorTitle = styled(Title)`\n  color: rgb(157, 173, 175);\n`;\n\nconst CodeInput = styled.textarea`\n  margin-top: 20px;\n  background-color: rgba(26, 35, 39);\n  flex: 1;\n  color: white;\n  font-family: 'Fira Mono', monospace;\n  font-size: 16px;\n  border: none;\n  resize: none;\n  outline: none;\n  padding: 30px 20px;\n`;\n\nconst Editor = () => {\n  const { state, dispatch } = useStore();\n\n  const inputRef = useRef();\n\n  // Component did mount\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  const handleCodeChange = e => dispatch.editCode(e.target.value);\n\n  return (\n    <Wrapper>\n      <EditorTitle>Editor</EditorTitle>\n      <CodeInput\n        value={state.code}\n        onChange={handleCodeChange}\n        ref={inputRef}\n        spellCheck={false}\n      />\n    </Wrapper>\n  );\n};\n\nexport default Editor;\n","/* eslint-disable */\n\n/**\n * covert canvas to image\n * and save the image file\n */\n\nconst b64toBlob = (b64Data, contentType = '', sliceSize = 512) => {\n  if (/^data/.test(b64Data)) {\n    b64Data = b64Data.substring(31);\n  }\n  const byteCharacters = atob(b64Data);\n  const byteArrays = [];\n\n  for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n    const slice = byteCharacters.slice(offset, offset + sliceSize);\n\n    const byteNumbers = new Array(slice.length);\n    for (let i = 0; i < slice.length; i++) {\n      byteNumbers[i] = slice.charCodeAt(i);\n    }\n\n    const byteArray = new Uint8Array(byteNumbers);\n\n    byteArrays.push(byteArray);\n  }\n\n  const blob = new Blob(byteArrays, { type: contentType });\n  return blob;\n};\n\nexport default (function() {\n  // check if support sth.\n  var $support = (function() {\n    var canvas = document.createElement('canvas'),\n      ctx = canvas.getContext('2d');\n\n    return {\n      canvas: !!ctx,\n      imageData: !!ctx.getImageData,\n      dataURL: !!canvas.toDataURL,\n      btoa: !!window.btoa,\n    };\n  })();\n\n  var downloadMime = 'image/octet-stream';\n\n  function scaleCanvas(canvas, width, height) {\n    var w = canvas.width,\n      h = canvas.height;\n    if (width == undefined) {\n      width = w;\n    }\n    if (height == undefined) {\n      height = h;\n    }\n\n    var retCanvas = document.createElement('canvas');\n    var retCtx = retCanvas.getContext('2d');\n    retCanvas.width = width;\n    retCanvas.height = height;\n    retCtx.drawImage(canvas, 0, 0, w, h, 0, 0, width, height);\n    return retCanvas;\n  }\n\n  function getDataURL(canvas, type, width, height) {\n    canvas = scaleCanvas(canvas, width, height);\n    return canvas.toDataURL(type);\n  }\n\n  function saveFile(strData, filename) {\n    /* create a link and add download filename*/\n    var link = document.createElement('a');\n    document.body.appendChild(link); //append it to DOM to work on Firefox and IE\n    link.download = filename;\n    // link.href = strData;\n    let createObjectURL;\n    if (window.URL && URL.createObjectURL) {\n      createObjectURL = URL.createObjectURL;\n    } else if (window.webkitURL) {\n      createObjectURL = webkitURL.createObjectURL;\n    } else {\n      return alert(\n        'Impossible to save screenshot. You can use your OS to take it manually ;)'\n      );\n    }\n    link.href = createObjectURL(b64toBlob(strData, 'application/octet-stream'));\n    link.click();\n  }\n\n  function genImage(strData) {\n    var img = document.createElement('img');\n    img.src = strData;\n    return img;\n  }\n  function fixType(type) {\n    type = type.toLowerCase().replace(/jpg/i, 'jpeg');\n    var r = type.match(/png|jpeg|bmp|gif/)[0];\n    return 'image/' + r;\n  }\n  function encodeData(data) {\n    if (!window.btoa) {\n      throw 'btoa undefined';\n    }\n    var str = '';\n    if (typeof data == 'string') {\n      str = data;\n    } else {\n      for (var i = 0; i < data.length; i++) {\n        str += String.fromCharCode(data[i]);\n      }\n    }\n\n    return btoa(str);\n  }\n  function getImageData(canvas) {\n    var w = canvas.width,\n      h = canvas.height;\n    return canvas.getContext('2d').getImageData(0, 0, w, h);\n  }\n  function makeURI(strData, type) {\n    //return 'data:' + type + ';base64,' + strData;\n    return strData;\n  }\n\n  /**\n   * create bitmap image\n   * 按照规则生成图片响应头和响应体\n   */\n  var genBitmapImage = function(oData) {\n    //\n    // BITMAPFILEHEADER: http://msdn.microsoft.com/en-us/library/windows/desktop/dd183374(v=vs.85).aspx\n    // BITMAPINFOHEADER: http://msdn.microsoft.com/en-us/library/dd183376.aspx\n    //\n\n    var biWidth = oData.width;\n    var biHeight = oData.height;\n    var biSizeImage = biWidth * biHeight * 3;\n    var bfSize = biSizeImage + 54; // total header size = 54 bytes\n\n    //\n    //  typedef struct tagBITMAPFILEHEADER {\n    //  \tWORD bfType;\n    //  \tDWORD bfSize;\n    //  \tWORD bfReserved1;\n    //  \tWORD bfReserved2;\n    //  \tDWORD bfOffBits;\n    //  } BITMAPFILEHEADER;\n    //\n    var BITMAPFILEHEADER = [\n      // WORD bfType -- The file type signature; must be \"BM\"\n      0x42,\n      0x4d,\n      // DWORD bfSize -- The size, in bytes, of the bitmap file\n      bfSize & 0xff,\n      (bfSize >> 8) & 0xff,\n      (bfSize >> 16) & 0xff,\n      (bfSize >> 24) & 0xff,\n      // WORD bfReserved1 -- Reserved; must be zero\n      0,\n      0,\n      // WORD bfReserved2 -- Reserved; must be zero\n      0,\n      0,\n      // DWORD bfOffBits -- The offset, in bytes, from the beginning of the BITMAPFILEHEADER structure to the bitmap bits.\n      54,\n      0,\n      0,\n      0,\n    ];\n\n    //\n    //  typedef struct tagBITMAPINFOHEADER {\n    //  \tDWORD biSize;\n    //  \tLONG  biWidth;\n    //  \tLONG  biHeight;\n    //  \tWORD  biPlanes;\n    //  \tWORD  biBitCount;\n    //  \tDWORD biCompression;\n    //  \tDWORD biSizeImage;\n    //  \tLONG  biXPelsPerMeter;\n    //  \tLONG  biYPelsPerMeter;\n    //  \tDWORD biClrUsed;\n    //  \tDWORD biClrImportant;\n    //  } BITMAPINFOHEADER, *PBITMAPINFOHEADER;\n    //\n    var BITMAPINFOHEADER = [\n      // DWORD biSize -- The number of bytes required by the structure\n      40,\n      0,\n      0,\n      0,\n      // LONG biWidth -- The width of the bitmap, in pixels\n      biWidth & 0xff,\n      (biWidth >> 8) & 0xff,\n      (biWidth >> 16) & 0xff,\n      (biWidth >> 24) & 0xff,\n      // LONG biHeight -- The height of the bitmap, in pixels\n      biHeight & 0xff,\n      (biHeight >> 8) & 0xff,\n      (biHeight >> 16) & 0xff,\n      (biHeight >> 24) & 0xff,\n      // WORD biPlanes -- The number of planes for the target device. This value must be set to 1\n      1,\n      0,\n      // WORD biBitCount -- The number of bits-per-pixel, 24 bits-per-pixel -- the bitmap\n      // has a maximum of 2^24 colors (16777216, Truecolor)\n      24,\n      0,\n      // DWORD biCompression -- The type of compression, BI_RGB (code 0) -- uncompressed\n      0,\n      0,\n      0,\n      0,\n      // DWORD biSizeImage -- The size, in bytes, of the image. This may be set to zero for BI_RGB bitmaps\n      biSizeImage & 0xff,\n      (biSizeImage >> 8) & 0xff,\n      (biSizeImage >> 16) & 0xff,\n      (biSizeImage >> 24) & 0xff,\n      // LONG biXPelsPerMeter, unused\n      0,\n      0,\n      0,\n      0,\n      // LONG biYPelsPerMeter, unused\n      0,\n      0,\n      0,\n      0,\n      // DWORD biClrUsed, the number of color indexes of palette, unused\n      0,\n      0,\n      0,\n      0,\n      // DWORD biClrImportant, unused\n      0,\n      0,\n      0,\n      0,\n    ];\n\n    var iPadding = (4 - ((biWidth * 3) % 4)) % 4;\n\n    var aImgData = oData.data;\n\n    var strPixelData = '';\n    var biWidth4 = biWidth << 2;\n    var y = biHeight;\n    var fromCharCode = String.fromCharCode;\n\n    do {\n      var iOffsetY = biWidth4 * (y - 1);\n      var strPixelRow = '';\n      for (var x = 0; x < biWidth; x++) {\n        var iOffsetX = x << 2;\n        strPixelRow +=\n          fromCharCode(aImgData[iOffsetY + iOffsetX + 2]) +\n          fromCharCode(aImgData[iOffsetY + iOffsetX + 1]) +\n          fromCharCode(aImgData[iOffsetY + iOffsetX]);\n      }\n\n      for (var c = 0; c < iPadding; c++) {\n        strPixelRow += String.fromCharCode(0);\n      }\n\n      strPixelData += strPixelRow;\n    } while (--y);\n\n    var strEncoded =\n      encodeData(BITMAPFILEHEADER.concat(BITMAPINFOHEADER)) +\n      encodeData(strPixelData);\n\n    return strEncoded;\n  };\n\n  /**\n   * saveAsImage\n   * @param canvasElement\n   * @param {String} image type\n   * @param {Number} [optional] png width\n   * @param {Number} [optional] png height\n   */\n  var saveAsImage = function(canvas, filename, width, height, type) {\n    if ($support.canvas && $support.dataURL) {\n      if (typeof canvas == 'string') {\n        canvas = document.getElementById(canvas);\n      }\n      if (type == undefined) {\n        type = 'png';\n      }\n      type = fixType(type);\n      if (/bmp/.test(type)) {\n        var data = getImageData(scaleCanvas(canvas, width, height));\n        var strData = genBitmapImage(data);\n        saveFile(makeURI(strData, downloadMime), filename);\n      } else {\n        var strData = getDataURL(canvas, type, width, height);\n        saveFile(strData.replace(type, downloadMime), filename);\n      }\n    }\n  };\n\n  var convertToImage = function(canvas, width, height, type) {\n    if ($support.canvas && $support.dataURL) {\n      if (typeof canvas == 'string') {\n        canvas = document.getElementById(canvas);\n      }\n      if (type == undefined) {\n        type = 'png';\n      }\n      type = fixType(type);\n\n      if (/bmp/.test(type)) {\n        var data = getImageData(scaleCanvas(canvas, width, height));\n        var strData = genBitmapImage(data);\n        return genImage(makeURI(strData, 'image/bmp'));\n      } else {\n        var strData = getDataURL(canvas, type, width, height);\n        return genImage(strData);\n      }\n    }\n  };\n\n  return {\n    saveAsImage: saveAsImage,\n    saveAsPNG: function(canvas, filename, width, height) {\n      return saveAsImage(canvas, filename, width, height, 'png');\n    },\n    saveAsJPEG: function(canvas, filename, width, height) {\n      return saveAsImage(canvas, filename, width, height, 'jpeg');\n    },\n    saveAsGIF: function(canvas, filename, width, height) {\n      return saveAsImage(canvas, filename, width, height, 'gif');\n    },\n    saveAsBMP: function(canvas, filename, width, height) {\n      return saveAsImage(canvas, filename, width, height, 'bmp');\n    },\n\n    convertToImage: convertToImage,\n    convertToPNG: function(canvas, width, height) {\n      return convertToImage(canvas, width, height, 'png');\n    },\n    convertToJPEG: function(canvas, width, height) {\n      return convertToImage(canvas, width, height, 'jpeg');\n    },\n    convertToGIF: function(canvas, width, height) {\n      return convertToImage(canvas, width, height, 'gif');\n    },\n    convertToBMP: function(canvas, width, height) {\n      return convertToImage(canvas, width, height, 'bmp');\n    },\n  };\n})();\n","import React from 'react';\nimport styled from 'styled-components';\nimport Select from 'react-select';\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/prism';\nimport { useStore } from '../state/store';\n\nconst BackgroundSelect = styled(Select)`\n  width: 120px;\n`;\n\nconst LanguageSelect = styled(Select)`\n  width: 130px;\n`;\n\nconst Label = styled.label`\n  margin: 0 7px 0 10px;\n  font-size: 15px;\n`;\n\nconst backgrounds = [\n  { label: 'Grey', value: 'rgb(158, 173, 175)' },\n  { label: 'White', value: 'rgb(255, 255, 255)' },\n  { label: 'Pink', value: 'rgb(253, 168, 196)' },\n  { label: 'Custom', value: 'custom' },\n];\n\nconst languages = SyntaxHighlighter.supportedLanguages.map(l => ({\n  label: l,\n  value: l,\n}));\n\nconst Settings = () => {\n  const { state, dispatch } = useStore();\n  const selectedLanguage = {\n    label: state.language,\n    value: state.language,\n  };\n  const selectedBackground = backgrounds.find(\n    background => background.value === state.background\n  );\n  return (\n    <>\n      <Label htmlFor=\"background\">Background</Label>\n      <BackgroundSelect\n        id=\"background\"\n        value={selectedBackground}\n        onChange={option => dispatch.setBackground(option.value)}\n        options={backgrounds}\n      />\n      <Label htmlFor=\"language\">Language</Label>\n      <LanguageSelect\n        id=\"language\"\n        value={selectedLanguage}\n        onChange={option => dispatch.setLanguage(option.value)}\n        options={languages}\n      />\n    </>\n  );\n};\n\nexport default Settings;\n","import idb from 'idb';\n\nconst dbPromise = idb.open('bgImage-store', 1, upgradeDB => {\n  upgradeDB.createObjectStore('bgImage');\n});\n\nconst bgImageStore = {\n  get(key) {\n    return dbPromise.then(db => {\n      return db\n        .transaction('bgImage')\n        .objectStore('bgImage')\n        .get(key);\n    });\n  },\n  set(key, val) {\n    return dbPromise.then(db => {\n      const tx = db.transaction('bgImage', 'readwrite');\n      tx.objectStore('bgImage').put(val, key);\n      return tx.complete;\n    });\n  },\n};\n\nexport const setBgImage = (id, bgImage) => bgImageStore.set(id, bgImage);\n\nexport const getBgImage = id => bgImageStore.get(id);\n","import React, { useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport useOnClickOutside from 'use-onclickoutside';\nimport { ChromePicker } from 'react-color';\nimport { useStore } from '../state/store';\nimport useFileInput from '../hooks/useFileInput';\nimport { setBgImage } from '../state/db';\n\nconst Wrapper = styled.div`\n  display: flex;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  justify-content: flex-end;\n  margin: 10px;\n`;\n\nconst Button = styled.button`\n  border: 0;\n  padding: 5px 10px;\n  background-color: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-family: inherit;\n  border-radius: 3px;\n  outline: none;\n\n  + button {\n    margin-left: 10px;\n  }\n`;\n\nconst ColorPickerWrapper = styled.div`\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  right: 20px;\n  top: 20px;\n`;\n\nconst CustomBgSettings = () => {\n  const colorPickerWrapperRef = useRef();\n  const { select, dispatch } = useStore();\n  const [isColorPickerVisible, setColorPickerVisible] = useState(false);\n\n  const handleFileUpload = fileContent => {\n    const id = +new Date();\n    setBgImage(id, fileContent).then(() =>\n      dispatch.setCustomBackground(`img-${id}`)\n    );\n  };\n\n  const uploadFile = useFileInput(handleFileUpload);\n\n  useOnClickOutside(colorPickerWrapperRef, () => {\n    setColorPickerVisible(false);\n  });\n\n  if (!select.isCustomBackground()) {\n    return null;\n  }\n\n  const customBackground = select.getCustomBackground();\n\n  if (isColorPickerVisible) {\n    return (\n      <ColorPickerWrapper ref={colorPickerWrapperRef}>\n        <ChromePicker\n          color={/^#/.test(customBackground) && customBackground}\n          onChangeComplete={color => dispatch.setCustomBackground(color.hex)}\n        />\n      </ColorPickerWrapper>\n    );\n  }\n  return (\n    <Wrapper>\n      <Button onClick={() => setColorPickerVisible(true)}>Color</Button>\n      <Button onClick={() => uploadFile()}>Image</Button>\n    </Wrapper>\n  );\n};\n\nexport default CustomBgSettings;\n","import { useEffect, useState } from 'react';\n\nexport default (onChange = () => {}) => {\n  const [fileInput] = useState(() => {\n    const input = document.createElement('input');\n    input.type = 'file';\n    return input;\n  });\n\n  useEffect(() => {\n    const handleChange = evt => {\n      const [file] = [...fileInput.files];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          onChange(e.target.result);\n        };\n        reader.readAsDataURL(file);\n      }\n      fileInput.value = null;\n    };\n\n    fileInput.addEventListener('change', handleChange);\n\n    return () => fileInput.removeEventListener('change', handleChange);\n  }, []);\n\n  return () => {\n    fileInput.click();\n  };\n};\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Wrapper = styled.div`\n  position: absolute;\n  min-width: 300px;\n  max-width: 500px;\n  background-color: rgb(38, 50, 56);\n  border-radius: 6px;\n  box-shadow: 0 20px 70px rgba(0, 0, 0, 0.55);\n  z-index: 1;\n  user-select: none;\n`;\n\nconst Toolbar = styled.div`\n  display: flex;\n  flex-direction: row;\n  height: 45px;\n  align-items: center;\n  padding: 0 10px;\n`;\n\nconst ToolbarIcon = styled.div`\n  width: 16px;\n  height: 16px;\n  border-radius: 8px;\n  background-color: ${p => p.color};\n  margin: 5px;\n`;\n\nconst CodeWrapper = styled.div`\n  padding: 0 15px 15px 15px;\n  max-height: 70vh;\n  overflow: auto;\n`;\n\nconst PreviewWindow = ({ children }) => (\n  <Wrapper>\n    <Toolbar>\n      <ToolbarIcon color=\"rgb(252, 96, 92)\" />\n      <ToolbarIcon color=\"rgb(253, 188, 64)\" />\n      <ToolbarIcon color=\"rgb(52, 200, 74)\" />\n    </Toolbar>\n    <CodeWrapper>{children}</CodeWrapper>\n  </Wrapper>\n);\n\nexport default PreviewWindow;\n","import React, { useRef, useEffect, useState } from 'react';\nimport canvasImageCoverPosition from '../libs/canvasImageCoverPosition';\n\nconst Image = ({ data, width, height }) => {\n  const canvasRef = useRef();\n  const [rect, setRect] = useState({ width, height });\n  const [image, setImage] = useState(null);\n\n  useEffect(() => {\n    const img = document.createElement('img');\n    img.src = data;\n    img.onload = setImage(img);\n  }, []);\n\n  useEffect(\n    () => {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      ctx.clearRect(0, 0, rect.width, rect.height);\n      setRect({ width, height });\n    },\n    [width, height]\n  );\n\n  useEffect(\n    () => {\n      if (!image) {\n        return;\n      }\n      requestAnimationFrame(draw);\n    },\n    [rect.with, rect.height, image]\n  );\n\n  const draw = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    const {\n      width: canvasWidth,\n      height: canvasHeight,\n    } = canvas.getBoundingClientRect();\n    const {\n      offsetLeft,\n      offsetTop,\n      width: imgWidth,\n      height: imgHeight,\n    } = canvasImageCoverPosition(\n      image.width,\n      image.height,\n      canvasWidth,\n      canvasHeight,\n      0.5,\n      0.5\n    );\n    ctx.drawImage(image, offsetLeft, offsetTop, imgWidth, imgHeight);\n  };\n\n  return <canvas ref={canvasRef} width={rect.width} height={rect.height} />;\n};\n\nexport default Image;\n","/* eslint-disable */\n\n/*\n * By Bohdan Zolotukhyn\n * \n * A1,B1 = imgNaturalWidth,imgNaturalHeight - images natural width and height\n * A2,B2 = canvasWidth,canvasHeight - canvas width and height\n * A3,B3 - proportional values of the output image\n * offsetLeft - left offset in percent equal to background-position-x. Range(0-1)\n * offsetTop - top offset in percent equal to background-position-y. Range(0-1)\n *\n * If the offsets are not specified, the image is centered\n * var imagePosition = canvasImageCoverPosition(image.naturalWidth, image.NaturalHeight , canvas.width, canvas.height, [offsetLeft, offsetTop])\n * canvas.getContext('2d')\n   .drawImage(image, imagePosition.offsetLeft, imagePosition.offsetTop, imagePosition.width, imagePosition.height);\n*/\nexport default function canvasImageCoverPosition(\n  imgNaturalWidth,\n  imgNaturalHeight,\n  canvasWidth,\n  canvasHeight,\n  offsetLeft,\n  offsetTop\n) {\n  var A1, A2, A3, B1, B2, B3, dA, dB;\n  offsetLeft = offsetLeft || 0.5;\n  offsetTop = offsetTop || 0.5;\n  A1 = imgNaturalWidth;\n  A2 = canvasWidth;\n  dA = A2 - A1;\n  B1 = imgNaturalHeight;\n  B2 = canvasHeight;\n  dB = B2 - B1;\n  if (dA < dB) {\n    B3 = B2;\n    A3 = A1 + (A1 * ((dB * 100) / B1)) / 100;\n  } else {\n    A3 = A2;\n    B3 = B1 + (B1 * ((dA * 100) / A1)) / 100;\n  }\n  return {\n    width: A3,\n    height: B3,\n    offsetLeft: round((A2 - A3) * offsetLeft),\n    offsetTop: round((B2 - B3) * offsetTop),\n  };\n  function round(v) {\n    return (+(v >= 0) || -1) * Math.round(Math.abs(v));\n  }\n}\n","import React, { useRef, useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport html2canvas from 'html2canvas';\nimport SyntaxHighlighter from 'react-syntax-highlighter/dist/cjs/prism';\nimport { tomorrow } from 'react-syntax-highlighter/dist/styles/prism';\nimport Canvas2Image from '../libs/canvas2image';\nimport Title from './Title';\nimport Settings from './Settings';\nimport CustomBgSettings from './CustomBgSettings';\nimport PreviewWindow from './PreviewWindow';\nimport { useStore } from '../state/store';\nimport useBoundingRect from '../hooks/useBoundingRect';\nimport { getBgImage } from '../state/db';\nimport Image from './Image';\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  flex: 6;\n  padding: 20px;\n  background-color: white;\n`;\n\nconst PreviewTitle = styled(Title)`\n  flex: 1;\n`;\n\nconst CaptureButton = styled.button`\n  border: 1px solid hsl(0, 0%, 70%);\n  background: white;\n  padding: 10px;\n  height: 38px;\n  line-height: 20px;\n  vertical-align: middle;\n  border-radius: 4px;\n  font-size: 20px;\n  cursor: pointer;\n  margin-left: 10px;\n`;\n\nconst TitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  z-index: 10;\n`;\n\nconst PreviewZone = styled.div`\n  position: relative;\n  display: flex;\n  flex: 1;\n  margin-top: 20px;\n  align-items: center;\n  justify-content: center;\n  background-size: cover;\n\n  // Syntax highlighter overrides\n  pre {\n    background-color: transparent !important;\n    padding: 0 !important;\n    border: none !important;\n    box-shadow: none !important;\n    span {\n      text-shadow: none !important;\n    }\n  }\n`;\n\nconst BackgroundImage = styled.div`\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 0;\n`;\n\nconst CustomBgSettingsWrapper = styled.div`\n  z-index: 2;\n`;\n\nconst takeCapture = previewZone => {\n  const ignoreElements = el => el.classList.contains('bg-settings');\n  html2canvas(previewZone, { ignoreElements, logging: false }).then(canvas => {\n    const { width, height } = previewZone.getBoundingClientRect();\n    Canvas2Image.saveAsPNG(\n      canvas,\n      `code-${+new Date()}.png`,\n      width * 2,\n      height * 2\n    );\n  });\n};\n\nconst Preview = () => {\n  const { state, select } = useStore();\n  const [backgroundImage, setBackgroundImage] = useState(null);\n  const previewRef = useRef();\n  const { width: previewWidth, height: previewHeight } = useBoundingRect(\n    previewRef\n  );\n\n  useEffect(\n    () => {\n      if (select.isBackgroundImage()) {\n        getBgImage(+state.customBackground.substring(4)).then(data =>\n          setBackgroundImage(data)\n        );\n      } else {\n        setBackgroundImage(null);\n      }\n    },\n    [state.background, state.customBackground]\n  );\n\n  return (\n    <Wrapper>\n      <TitleWrapper>\n        <PreviewTitle>Preview</PreviewTitle>\n        <Settings />\n        <CaptureButton\n          title=\"capture\"\n          onClick={() => takeCapture(previewRef.current)}\n        >\n          <span role=\"img\" aria-label=\"Capture icon\">\n            📸\n          </span>\n        </CaptureButton>\n      </TitleWrapper>\n      <PreviewZone\n        ref={previewRef}\n        style={{\n          background: select.isBackgroundImage()\n            ? 'transparent'\n            : select.getBackgroundColor(),\n        }}\n      >\n        <CustomBgSettingsWrapper className=\"bg-settings\">\n          <CustomBgSettings />\n        </CustomBgSettingsWrapper>\n        <PreviewWindow>\n          <SyntaxHighlighter\n            language={state.language}\n            style={tomorrow}\n            wrapLines={false}\n          >\n            {state.code}\n          </SyntaxHighlighter>\n        </PreviewWindow>\n        {backgroundImage && (\n          <BackgroundImage>\n            <Image\n              data={backgroundImage}\n              width={previewWidth}\n              height={previewHeight}\n            />\n          </BackgroundImage>\n        )}\n      </PreviewZone>\n    </Wrapper>\n  );\n};\n\nexport default Preview;\n","import { useState, useEffect } from 'react';\nimport debouce from 'lodash.debounce';\n\nexport default ref => {\n  const [size, setSize] = useState({});\n  useEffect(\n    () => {\n      setSize(ref.current.getBoundingClientRect());\n      const onResize = debouce(() => {\n        setSize(ref.current.getBoundingClientRect());\n      }, 300);\n      window.addEventListener('resize', onResize);\n      return () => window.removeEventListener('resize', onResize);\n    },\n    [ref]\n  );\n  return size;\n};\n","import { useEffect } from 'react';\nimport { useStore } from '../state/store';\n\nconst LocalStorage = () => {\n  const { state } = useStore();\n  useEffect(\n    () => {\n      localStorage.setItem('appState', JSON.stringify(state));\n    },\n    [state]\n  );\n  return null;\n};\n\nexport default LocalStorage;\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport reset from 'styled-reset';\nimport { StoreProvider } from '../state/store';\nimport Editor from './Editor';\nimport Preview from './Preview';\nimport LocalStorage from './LocalStorage';\n\nconst GlobalStyle = createGlobalStyle`\n  ${reset};\n  body {\n    font-family: 'Roboto', sans-serif;\n  }\n`;\n\nconst Wrapper = styled.div`\n  height: 100vh;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst App = () => (\n  <>\n    <GlobalStyle />\n    <StoreProvider>\n      <LocalStorage />\n      <Wrapper>\n        <Editor />\n        <Preview />\n      </Wrapper>\n    </StoreProvider>\n  </>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { registerLanguage } from 'react-syntax-highlighter/dist/prism-light';\nimport jsx from 'react-syntax-highlighter/dist/languages/prism/jsx';\n\n///registerLanguage('js', js);\nregisterLanguage('jsx', jsx);\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}